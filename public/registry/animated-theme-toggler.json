{
  "name": "animated-theme-toggler",
  "type": "registry:ui",
  "dependencies": [
    "lucide-vue-next",
    "clsx",
    "tailwind-merge"
  ],
  "files": [
    {
      "path": "animated-theme-toggler/AnimatedThemeToggler.vue",
      "content": "<script setup lang=\"ts\">\r\nimport { ref, nextTick, onMounted } from 'vue'\r\nimport { Moon, Sun } from 'lucide-vue-next'\r\nimport { cn } from '@/lib/utils'\r\nimport { useDark, useToggle } from '@vueuse/core'\r\n\r\ninterface Props {\r\n  duration?: number\r\n  class?: string\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  duration: 400,\r\n  class: ''\r\n})\r\n\r\n// Track if the component is mounted (client-side)\r\nconst mounted = ref(false)\r\n\r\n// Use VueUse to handle state and localStorage automatically\r\nconst isDark = useDark({\r\n  storageKey: 'theme',\r\n  valueDark: 'dark',\r\n  valueLight: 'light',\r\n  initialValue: 'dark',\r\n})\r\nconst toggleDark = useToggle(isDark)\r\n\r\nconst buttonRef = ref<HTMLButtonElement | null>(null)\r\n\r\nonMounted(() => {\r\n  mounted.value = true\r\n})\r\n\r\nconst toggleTheme = async (event: MouseEvent) => {\r\n  // If View Transitions aren't supported, just toggle\r\n  // @ts-ignore\r\n  if (!document.startViewTransition) {\r\n    toggleDark()\r\n    return\r\n  }\r\n\r\n  const button = buttonRef.value\r\n  if (!button) return\r\n\r\n  // Start the transition\r\n  // @ts-ignore\r\n  const transition = document.startViewTransition(async () => {\r\n    toggleDark()\r\n    await nextTick()\r\n  })\r\n\r\n  await transition.ready\r\n\r\n  const { top, left, width, height } = button.getBoundingClientRect()\r\n  const x = left + width / 2\r\n  const y = top + height / 2\r\n  const right = window.innerWidth - left\r\n  const bottom = window.innerHeight - top\r\n  const maxRadius = Math.hypot(\r\n      Math.max(left, right),\r\n      Math.max(top, bottom)\r\n  )\r\n\r\n  document.documentElement.animate(\r\n      {\r\n        clipPath: [\r\n          `circle(0px at ${x}px ${y}px)`,\r\n          `circle(${maxRadius}px at ${x}px ${y}px)`,\r\n        ],\r\n      },\r\n      {\r\n        duration: props.duration,\r\n        easing: \"ease-in-out\",\r\n        pseudoElement: \"::view-transition-new(root)\",\r\n      }\r\n  )\r\n}\r\n</script>\r\n\r\n<template>\r\n  <button\r\n      ref=\"buttonRef\"\r\n      type=\"button\"\r\n      @click=\"toggleTheme\"\r\n      :class=\"cn('relative inline-flex items-center justify-center rounded-md p-2 hover:bg-accent hover:text-accent-foreground transition-colors', props.class)\"\r\n  >\r\n    <template v-if=\"mounted\">\r\n      <Sun v-if=\"isDark\" class=\"h-5 w-5\" />\r\n      <Moon v-else class=\"h-5 w-5\" />\r\n    </template>\r\n\r\n    <div v-else class=\"h-5 w-5\" />\r\n\r\n    <span class=\"sr-only\">Toggle theme</span>\r\n  </button>\r\n</template>\r\n\r\n<style>\r\n::view-transition-old(root),\r\n::view-transition-new(root) {\r\n  animation: none;\r\n  mix-blend-mode: normal;\r\n}\r\n\r\n::view-transition-new(root) {\r\n  z-index: 2147483646;\r\n}\r\n</style>",
      "type": "registry:ui"
    },
    {
      "path": "animated-theme-toggler/index.ts",
      "content": "export { default as AnimatedThemeToggler } from './AnimatedThemeToggler.vue'\n",
      "type": "registry:ui"
    }
  ]
}