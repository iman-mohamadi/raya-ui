{
  "name": "flip-clock",
  "type": "registry:ui",
  "dependencies": [
    "clsx",
    "tailwind-merge",
    "class-variance-authority"
  ],
  "files": [
    {
      "path": "flip-clock/FlipClock.vue",
      "content": "<script setup lang=\"ts\">\r\nimport { ref, onMounted, onUnmounted, computed } from 'vue'\r\nimport { cn } from '@/lib/utils'\r\nimport { cva } from 'class-variance-authority'\r\nimport FlipUnit from './FlipUnit.vue'\r\nimport type { VariantProps } from 'class-variance-authority'\r\n\r\n// Re-use variant definition type from FlipUnit for consistency in props,\r\n// though we define the clock layout variants here.\r\nconst flipClockVariants = cva(\r\n    \"relative flex justify-center items-center font-mono font-medium\",\r\n    {\r\n      variants: {\r\n        size: {\r\n          sm: \"text-3xl space-x-1\",\r\n          md: \"text-5xl space-x-2\",\r\n          lg: \"text-6xl space-x-2\",\r\n          xl: \"text-8xl space-x-3\"\r\n        },\r\n        variant: {\r\n          default: \"\",\r\n          secondary: \"\",\r\n          destructive: \"\",\r\n          outline: \"\",\r\n          muted: \"\"\r\n        }\r\n      },\r\n      defaultVariants: {\r\n        size: \"md\",\r\n        variant: \"default\"\r\n      }\r\n    }\r\n)\r\n\r\ninterface Props {\r\n  countdown?: boolean\r\n  targetDate?: Date | string\r\n  showDays?: \"auto\" | \"always\" | \"never\"\r\n  size?: VariantProps<typeof flipClockVariants>['size']\r\n  variant?: \"default\" | \"secondary\" | \"destructive\" | \"outline\" | \"muted\"\r\n  class?: string\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  countdown: false,\r\n  showDays: \"auto\",\r\n  size: \"md\",\r\n  variant: \"default\"\r\n})\r\n\r\ninterface TimeLeft {\r\n  days: number\r\n  hours: number\r\n  minutes: number\r\n  seconds: number\r\n}\r\n\r\nfunction getTime(countdown: boolean, targetDate?: Date | string): TimeLeft {\r\n  const now = new Date()\r\n\r\n  // Real-time Clock Mode\r\n  if (!countdown) {\r\n    return {\r\n      days: 0,\r\n      hours: now.getHours(),\r\n      minutes: now.getMinutes(),\r\n      seconds: now.getSeconds()\r\n    }\r\n  }\r\n\r\n  // Countdown Mode\r\n  if (!targetDate) return { days: 0, hours: 0, minutes: 0, seconds: 0 }\r\n\r\n  const target = new Date(targetDate)\r\n  const diff = Math.max(0, target.getTime() - now.getTime())\r\n\r\n  return {\r\n    days: Math.floor(diff / (1000 * 60 * 60 * 24)),\r\n    hours: Math.floor((diff / (1000 * 60 * 60)) % 24),\r\n    minutes: Math.floor((diff / (1000 * 60)) % 60),\r\n    seconds: Math.floor((diff / 1000) % 60)\r\n  }\r\n}\r\n\r\nconst time = ref(getTime(props.countdown, props.targetDate))\r\nlet timer: ReturnType<typeof setInterval>\r\n\r\nonMounted(() => {\r\n  timer = setInterval(() => {\r\n    const nextTime = getTime(props.countdown, props.targetDate)\r\n    // Only update state if seconds actually changed\r\n    if (time.value.seconds !== nextTime.seconds || time.value.minutes !== nextTime.minutes) {\r\n      time.value = nextTime\r\n    }\r\n  }, 250)\r\n})\r\n\r\nonUnmounted(() => {\r\n  clearInterval(timer)\r\n})\r\n\r\nconst daysStr = computed(() => String(time.value.days).padStart(3, \"0\"))\r\nconst hoursStr = computed(() => String(time.value.hours).padStart(2, \"0\"))\r\nconst minutesStr = computed(() => String(time.value.minutes).padStart(2, \"0\"))\r\nconst secondsStr = computed(() => String(time.value.seconds).padStart(2, \"0\"))\r\n\r\nconst shouldShowDays = computed(() =>\r\n    props.countdown && (props.showDays === \"always\" || (props.showDays === \"auto\" && time.value.days > 0))\r\n)\r\n\r\nconst heightMap: Record<string, string> = {\r\n  sm: \"text-4xl\",\r\n  md: \"text-5xl\",\r\n  lg: \"text-6xl\",\r\n  xl: \"text-8xl\"\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div :class=\"cn(flipClockVariants({ size, variant }), props.class)\">\r\n    <template v-if=\"shouldShowDays\">\r\n      <FlipUnit\r\n          v-for=\"(digit, i) in daysStr\"\r\n          :key=\"`d-${i}`\"\r\n          :digit=\"digit\"\r\n          :size=\"size\"\r\n          :variant=\"variant\"\r\n      />\r\n      <span :class=\"cn('text-center -translate-y-[8%]', heightMap[size || 'md'])\">:</span>\r\n    </template>\r\n\r\n    <FlipUnit\r\n        v-for=\"(digit, i) in hoursStr\"\r\n        :key=\"`h-${i}`\"\r\n        :digit=\"digit\"\r\n        :size=\"size\"\r\n        :variant=\"variant\"\r\n    />\r\n\r\n    <span :class=\"cn('text-center -translate-y-[8%]', heightMap[size || 'md'])\">:</span>\r\n\r\n    <FlipUnit\r\n        v-for=\"(digit, i) in minutesStr\"\r\n        :key=\"`m-${i}`\"\r\n        :digit=\"digit\"\r\n        :size=\"size\"\r\n        :variant=\"variant\"\r\n    />\r\n\r\n    <span :class=\"cn('text-center -translate-y-[8%]', heightMap[size || 'md'])\">:</span>\r\n\r\n    <FlipUnit\r\n        v-for=\"(digit, i) in secondsStr\"\r\n        :key=\"`s-${i}`\"\r\n        :digit=\"digit\"\r\n        :size=\"size\"\r\n        :variant=\"variant\"\r\n    />\r\n  </div>\r\n</template>",
      "type": "registry:ui"
    },
    {
      "path": "flip-clock/FlipUnit.vue",
      "content": "<script setup lang=\"ts\">\r\nimport { ref, watch } from 'vue'\r\nimport { cn } from '@/lib/utils'\r\nimport { cva } from 'class-variance-authority'\r\nimport type { VariantProps } from 'class-variance-authority'\r\n\r\nconst flipUnitVariants = cva(\r\n    \"relative subpixel-antialiased perspective-[1000px] rounded-md overflow-hidden\",\r\n    {\r\n      variants: {\r\n        size: {\r\n          sm: \"w-10 min-w-10 h-14 text-3xl\",\r\n          md: \"w-14 min-w-14 h-20 text-5xl\",\r\n          lg: \"w-17 min-w-17 h-24 text-6xl\",\r\n          xl: \"w-22 min-w-22 h-32 text-8xl\"\r\n        },\r\n        variant: {\r\n          default: \"bg-primary text-primary-foreground\",\r\n          secondary: \"bg-secondary text-secondary-foreground\",\r\n          destructive: \"bg-destructive text-destructive-foreground\",\r\n          outline: \"border border-input bg-background text-foreground\",\r\n          muted: \"bg-muted text-muted-foreground\"\r\n        }\r\n      },\r\n      defaultVariants: {\r\n        size: \"md\",\r\n        variant: \"default\"\r\n      }\r\n    }\r\n)\r\n\r\ninterface Props {\r\n  digit: string | number\r\n  size?: VariantProps<typeof flipUnitVariants>['size']\r\n  variant?: VariantProps<typeof flipUnitVariants>['variant']\r\n  class?: string\r\n}\r\n\r\nconst props = defineProps<Props>()\r\n\r\nconst prevDigit = ref(props.digit)\r\nconst flipping = ref(false)\r\n\r\nwatch(() => props.digit, (current, previous) => {\r\n  if (current !== previous) {\r\n    flipping.value = true\r\n    const timer = setTimeout(() => {\r\n      flipping.value = false\r\n      prevDigit.value = current\r\n    }, 550) // Slightly less than 600ms\r\n  }\r\n})\r\n\r\nconst commonCardStyle = \"absolute inset-x-0 overflow-hidden h-1/2 bg-inherit text-inherit\"\r\n</script>\r\n\r\n<template>\r\n  <div :class=\"cn(flipUnitVariants({ size, variant }), props.class)\">\r\n    <div :class=\"cn(commonCardStyle, 'rounded-t-lg top-0')\">\r\n      <span class=\"absolute left-0 right-0 w-full flex items-center justify-center h-[200%] top-0\">\r\n        {{ digit }}\r\n      </span>\r\n    </div>\r\n\r\n    <div :class=\"cn(commonCardStyle, 'rounded-b-lg translate-y-full')\">\r\n      <span class=\"absolute left-0 right-0 w-full flex items-center justify-center h-[200%] -top-[100%]\">\r\n        {{ prevDigit }}\r\n      </span>\r\n    </div>\r\n\r\n    <div\r\n        :class=\"cn(\r\n        commonCardStyle,\r\n        'z-20 origin-bottom backface-hidden rounded-t-lg',\r\n        flipping && 'animate-flip-top'\r\n      )\"\r\n    >\r\n      <span class=\"absolute left-0 right-0 w-full flex items-center justify-center h-[200%] top-0\">\r\n        {{ prevDigit }}\r\n      </span>\r\n    </div>\r\n\r\n    <div\r\n        :class=\"cn(\r\n        commonCardStyle,\r\n        'z-10 origin-top backface-hidden rounded-b-lg translate-y-full',\r\n        flipping && 'animate-flip-bottom'\r\n      )\"\r\n        style=\"transform: rotateX(90deg)\"\r\n    >\r\n      <span class=\"absolute left-0 right-0 w-full flex items-center justify-center h-[200%] -top-[100%]\">\r\n        {{ digit }}\r\n      </span>\r\n    </div>\r\n\r\n    <div class=\"absolute top-1/2 left-0 w-full h-px -translate-y-1/2 bg-background/50 z-30\"></div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.backface-hidden {\r\n  backface-visibility: hidden;\r\n}\r\n\r\n.animate-flip-top {\r\n  animation: flip-top-anim 0.6s ease-in forwards;\r\n}\r\n\r\n.animate-flip-bottom {\r\n  animation: flip-bottom-anim 0.6s ease-out forwards;\r\n}\r\n\r\n@keyframes flip-top-anim {\r\n  0% {\r\n    transform: rotateX(0deg);\r\n    z-index: 30;\r\n  }\r\n  50%, 100% {\r\n    transform: rotateX(-90deg);\r\n    z-index: 10;\r\n  }\r\n}\r\n\r\n@keyframes flip-bottom-anim {\r\n  0%, 50% {\r\n    transform: rotateX(90deg);\r\n    z-index: 10;\r\n  }\r\n  100% {\r\n    transform: rotateX(0deg);\r\n    z-index: 30;\r\n  }\r\n}\r\n</style>",
      "type": "registry:ui"
    },
    {
      "path": "flip-clock/index.ts",
      "content": "export { default as FlipClock } from './FlipClock.vue'\n",
      "type": "registry:ui"
    }
  ]
}