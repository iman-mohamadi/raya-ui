{
  "name": "tree",
  "type": "registry:ui",
  "dependencies": [
    "lucide-vue-next",
    "clsx",
    "tailwind-merge"
  ],
  "files": [
    {
      "path": "tree/Tree.vue",
      "content": "<script setup lang=\"ts\" generic=\"T extends Record<string, any>\">\r\nimport { computed } from 'vue'\r\nimport { TreeRoot, TreeItem, useForwardPropsEmits, type TreeRootEmits, type TreeRootProps } from 'reka-ui'\r\nimport { ChevronRight, ChevronDown } from 'lucide-vue-next'\r\nimport { cn } from '@/lib/utils'\r\n\r\n// Use Omit to exclude the mandatory 'getKey' from TreeRootProps\r\n// and redefine it as optional in our component props.\r\nconst props = withDefaults(defineProps<Omit<TreeRootProps, 'getKey'> & {\r\n  class?: string\r\n  items?: T[]\r\n  labelKey?: string\r\n  childrenKey?: string\r\n  iconKey?: string\r\n  getKey?: (item: T) => string\r\n}>(), {\r\n  items: () => [],\r\n  labelKey: 'label',\r\n  childrenKey: 'children',\r\n  iconKey: 'icon',\r\n  selectionBehavior: 'toggle',\r\n})\r\n\r\nconst emits = defineEmits<TreeRootEmits>()\r\n\r\nconst delegatedProps = computed(() => {\r\n  // Destructure 'getKey' out so we don't forward it (we bind it explicitly)\r\n  const { class: _, items, labelKey, childrenKey, iconKey, getKey, ...delegated } = props\r\n  return delegated\r\n})\r\n\r\nconst forwarded = useForwardPropsEmits(delegatedProps, emits)\r\n\r\n// Helper to resolve the key for an item, matching TreeRoot's logic\r\nconst getKeyResolver = (item: T) => {\r\n  if (props.getKey) return props.getKey(item)\r\n  return item[props.labelKey] as string\r\n}\r\n\r\n// Manually handle expansion toggling for parents\r\nconst handleToggle = (item: any) => {\r\n  if (!item.hasChildren) return\r\n\r\n  const key = getKeyResolver(item.value)\r\n  const currentExpanded = props.expanded ? [...props.expanded] : []\r\n  const index = currentExpanded.indexOf(key)\r\n\r\n  if (index > -1) {\r\n    currentExpanded.splice(index, 1)\r\n  } else {\r\n    currentExpanded.push(key)\r\n  }\r\n\r\n  emits('update:expanded', currentExpanded)\r\n}\r\n</script>\r\n\r\n<template>\r\n  <TreeRoot\r\n      v-bind=\"forwarded\"\r\n      :class=\"cn('w-full select-none list-none', props.class)\"\r\n      :items=\"items\"\r\n      :get-key=\"getKeyResolver\"\r\n      :get-children=\"(item) => item[childrenKey]\"\r\n      v-slot=\"{ flattenItems }\"\r\n  >\r\n    <TreeItem\r\n        v-for=\"item in flattenItems\"\r\n        :key=\"item._id\"\r\n        v-bind=\"item.bind\"\r\n        v-slot=\"{ isExpanded, isSelected, isIndeterminate }\"\r\n        :class=\"cn(\r\n        'group relative flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-sm font-medium outline-none transition-colors',\r\n        'hover:bg-accent hover:text-accent-foreground',\r\n        'focus-visible:ring-2 focus-visible:ring-ring focus-visible:bg-accent',\r\n        'data-[selected]:bg-accent data-[selected]:text-accent-foreground',\r\n        'data-[disabled]:pointer-events-none data-[disabled]:opacity-50',\r\n        'cursor-pointer'\r\n      )\"\r\n        :style=\"{ paddingLeft: `${item.level * 1.5}rem` }\"\r\n        @select=\"(event) => {\r\n        // Prevent selection for items with children (parents)\r\n        if (item.hasChildren) {\r\n            event.preventDefault()\r\n        }\r\n      }\"\r\n        @click=\"handleToggle(item)\"\r\n    >\r\n      <component\r\n          :is=\"isExpanded ? ChevronDown : ChevronRight\"\r\n          v-if=\"item.hasChildren\"\r\n          class=\"h-4 w-4 shrink-0 text-muted-foreground group-hover:text-accent-foreground/80 transition-transform\"\r\n      />\r\n      <span v-else class=\"h-4 w-4 shrink-0\" />\r\n\r\n      <slot\r\n          name=\"item\"\r\n          :item=\"item.value\"\r\n          :expanded=\"isExpanded\"\r\n          :selected=\"isSelected\"\r\n          :indeterminate=\"isIndeterminate\"\r\n      >\r\n        <component\r\n            :is=\"item.value[iconKey]\"\r\n            v-if=\"item.value[iconKey]\"\r\n            class=\"h-4 w-4 shrink-0 text-muted-foreground group-hover:text-accent-foreground\"\r\n            :class=\"{ 'text-accent-foreground': isSelected }\"\r\n        />\r\n\r\n        <span class=\"truncate\">\r\n          {{ item.value[labelKey] }}\r\n        </span>\r\n      </slot>\r\n    </TreeItem>\r\n  </TreeRoot>\r\n</template>",
      "type": "registry:ui"
    },
    {
      "path": "tree/index.ts",
      "content": "export { default as Tree } from './Tree.vue'\n",
      "type": "registry:ui"
    }
  ]
}