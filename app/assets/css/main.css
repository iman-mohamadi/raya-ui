@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

:root {
    --background: oklch(1 0 0);
    --foreground: oklch(0.14 0 0);
    --card: oklch(1.00 0 0);
    --card-foreground: oklch(0.14 0 0);
    --popover: oklch(1.00 0 0);
    --popover-foreground: oklch(0.14 0 0);
    --primary: oklch(0.83 0.14 195.33);
    --primary-foreground: oklch(0.99 0 0);
    --secondary: oklch(0.97 0 0);
    --secondary-foreground: oklch(0.20 0 0);
    --muted: oklch(0.97 0 0);
    --muted-foreground: oklch(0.56 0 0);
    --accent: oklch(0.97 0 0);
    --accent-foreground: oklch(0.20 0 0);
    --destructive: oklch(0.58 0.24 28.48);
    --border: oklch(0.92 0.004 286.32);
    --input: oklch(0.92 0 0);
    --ring: oklch(0.71 0 0);
    --chart-1: oklch(0.65 0.22 36.85);
    --chart-2: oklch(0.60 0.11 184.15);
    --chart-3: oklch(0.40 0.07 227.18);
    --chart-4: oklch(0.83 0.17 81.03);
    --chart-5: oklch(0.77 0.17 65.36);
    --sidebar: oklch(0.99 0 0);
    --sidebar-foreground: oklch(0.14 0 0);
    --sidebar-primary: oklch(0.20 0 0);
    --sidebar-primary-foreground: oklch(0.99 0 0);
    --sidebar-accent: oklch(0.97 0 0);
    --sidebar-accent-foreground: oklch(0.20 0 0);
    --sidebar-border: oklch(0.92 0 0);
    --sidebar-ring: oklch(0.708 0 0);
    --font-sans: 'Geist', 'Geist Fallback', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
    --font-serif: "Geist", "Geist Fallback", ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
    --font-mono: "Geist Mono", "Geist Mono Fallback", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

    --radius: 0.625rem;

    --shadow-2xs: 0 1px 3px 0px oklch(0.00 0 0 / 0.05);
    --shadow-xs: 0 1px 3px 0px oklch(0.00 0 0 / 0.05);
    --shadow-sm: 0 1px 3px 0px oklch(0.00 0 0 / 0.10), 0 1px 2px -1px oklch(0.00 0 0 / 0.10);
    --shadow: 0 1px 3px 0px oklch(0.00 0 0 / 0.10), 0 1px 2px -1px oklch(0.00 0 0 / 0.10);
    --shadow-md: 0 1px 3px 0px oklch(0.00 0 0 / 0.10), 0 2px 4px -1px oklch(0.00 0 0 / 0.10);
    --shadow-lg: 0 1px 3px 0px oklch(0.00 0 0 / 0.10), 0 4px 6px -1px oklch(0.00 0 0 / 0.10);
    --shadow-xl: 0 1px 3px 0px oklch(0.00 0 0 / 0.10), 0 8px 10px -1px oklch(0.00 0 0 / 0.10);
    --shadow-2xl: 0 1px 3px 0px oklch(0.00 0 0 / 0.25);

    /* Feedback Colors */
    --success: oklch(0.62 0.19 145.4);
    --success-foreground: oklch(0.98 0 0);

    --warning: oklch(0.75 0.15 70);
    --warning-foreground: oklch(0.98 0 0);

    --info: oklch(0.60 0.16 255);
    --info-foreground: oklch(0.98 0 0);

    /* Map Error to Destructive */
    --error: var(--destructive);
    --error-foreground: oklch(1.00 0 0);

    --edge: color-mix(in oklab, var(--border) 64%, var(--background));
    --code: oklch(0.985 0 0);
    --code-foreground: oklch(0.141 0.005 285.823);
    --code-number: oklch(0.705 0.015 286.067);
    --code-highlight: oklch(0.967 0.001 286.375);
    --selection: oklch(0.141 0.005 285.823);
    --selection-foreground: oklch(0.985 0 0);

}

.dark {
    --background: oklch(0.141 0.005 285.823);
    --foreground: oklch(0.99 0 0);
    --card: oklch(0.20 0 0);
    --card-foreground: oklch(0.99 0 0);
    --popover: oklch(0.20 0 0);
    --popover-foreground: oklch(0.99 0 0);
    --primary: oklch(0.83 0.14 195.33);
    --primary-foreground: oklch(0.20 0 0);
    --secondary: oklch(0.27 0 0);
    --secondary-foreground: oklch(0.99 0 0);
    --muted: oklch(0.27 0 0);
    --muted-foreground: oklch(0.71 0 0);
    --accent: oklch(0.27 0 0);
    --accent-foreground: oklch(0.99 0 0);
    --destructive: oklch(0.70 0.19 22.23);
    --border: oklch(0.274 0.006 286.033);
    --input: oklch(1.00 0 0 / 15%);
    --ring: oklch(0.56 0 0);
    --chart-1: oklch(0.49 0.24 264.40);
    --chart-2: oklch(0.70 0.16 160.43);
    --chart-3: oklch(0.77 0.17 65.36);
    --chart-4: oklch(0.62 0.26 305.32);
    --chart-5: oklch(0.64 0.25 16.51);
    --sidebar: oklch(0.20 0 0);
    --sidebar-foreground: oklch(0.99 0 0);
    --sidebar-primary: oklch(0.49 0.24 264.40);
    --sidebar-primary-foreground: oklch(0.99 0 0);
    --sidebar-accent: oklch(0.27 0 0);
    --sidebar-accent-foreground: oklch(0.99 0 0);
    --sidebar-border: oklch(1.00 0 0 / 10%);
    --sidebar-ring: oklch(0.56 0 0);

    --shadow-2xs: 0 1px 3px 0px oklch(0.00 0 0 / 0.05);
    --shadow-xs: 0 1px 3px 0px oklch(0.00 0 0 / 0.05);
    --shadow-sm: 0 1px 3px 0px oklch(0.00 0 0 / 0.10), 0 1px 2px -1px oklch(0.00 0 0 / 0.10);
    --shadow: 0 1px 3px 0px oklch(0.00 0 0 / 0.10), 0 1px 2px -1px oklch(0.00 0 0 / 0.10);
    --shadow-md: 0 1px 3px 0px oklch(0.00 0 0 / 0.10), 0 2px 4px -1px oklch(0.00 0 0 / 0.10);
    --shadow-lg: 0 1px 3px 0px oklch(0.00 0 0 / 0.10), 0 4px 6px -1px oklch(0.00 0 0 / 0.10);
    --shadow-xl: 0 1px 3px 0px oklch(0.00 0 0 / 0.10), 0 8px 10px -1px oklch(0.00 0 0 / 0.10);
    --shadow-2xl: 0 1px 3px 0px oklch(0.00 0 0 / 0.25);

    --success: oklch(0.55 0.18 145.4);
    --success-foreground: oklch(1 0 0);

    --warning: oklch(0.70 0.15 70);
    --warning-foreground: oklch(0.1 0 0);

    --info: oklch(0.55 0.16 255);
    --info-foreground: oklch(1 0 0);

    --code: oklch(0.21 0.006 285.885);
    --code-foreground: oklch(0.985 0 0);
    --code-number: oklch(0.552 0.016 285.938);
    --code-highlight: oklch(0.274 0.006 286.033);
    --selection: oklch(0.985 0 0);
    --selection-foreground: oklch(0.141 0.005 285.823);
}

@theme inline {
    --color-background: var(--background);
    --color-foreground: var(--foreground);
    --color-card: var(--card);
    --color-card-foreground: var(--card-foreground);
    --color-popover: var(--popover);
    --color-popover-foreground: var(--popover-foreground);
    --color-primary: var(--primary);
    --color-primary-foreground: var(--primary-foreground);
    --color-secondary: var(--secondary);
    --color-secondary-foreground: var(--secondary-foreground);
    --color-muted: var(--muted);
    --color-muted-foreground: var(--muted-foreground);
    --color-accent: var(--accent);
    --color-accent-foreground: var(--accent-foreground);
    --color-destructive: var(--destructive);
    --color-border: var(--border);
    --color-input: var(--input);
    --color-ring: var(--ring);
    --color-edge: var(--edge);
    --color-code: var(--code);
    --color-code-foreground: var(--code-foreground);
    --color-code-number: var(--code-number);
    --color-code-highlight: var(--code-highlight);
    --color-selection: var(--selection);
    --color-selection-foreground: var(--selection-foreground);
    --color-chart-1: var(--chart-1);
    --color-chart-2: var(--chart-2);
    --color-chart-3: var(--chart-3);
    --color-chart-4: var(--chart-4);
    --color-chart-5: var(--chart-5);
    --color-sidebar: var(--sidebar);
    --color-sidebar-foreground: var(--sidebar-foreground);
    --color-sidebar-primary: var(--sidebar-primary);
    --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
    --color-sidebar-accent: var(--sidebar-accent);
    --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
    --color-sidebar-border: var(--sidebar-border);
    --color-sidebar-ring: var(--sidebar-ring);

    --font-sans: var(--font-sans);
    --font-mono: var(--font-mono);
    --font-serif: var(--font-serif);

    --radius-sm: calc(var(--radius) - 4px);
    --radius-md: calc(var(--radius) - 2px);
    --radius-lg: var(--radius);
    --radius-xl: calc(var(--radius) + 4px);

    --shadow-2xs: var(--shadow-2xs);
    --shadow-xs: var(--shadow-xs);
    --shadow-sm: var(--shadow-sm);
    --shadow: var(--shadow);
    --shadow-md: var(--shadow-md);
    --shadow-lg: var(--shadow-lg);
    --shadow-xl: var(--shadow-xl);
    --shadow-2xl: var(--shadow-2xl);

    /* Semantic Color Mapping */
    --color-success: var(--success);
    --color-success-content: var(--success-foreground);

    --color-warning: var(--warning);
    --color-warning-content: var(--warning-foreground);

    --color-info: var(--info);
    --color-info-content: var(--info-foreground);

    --color-error: var(--error);
    --color-error-content: var(--error-foreground);

    /* Utility Mappings used by Button */
    --color-primary-content: var(--primary-foreground);
    --color-secondary-content: var(--secondary-foreground);
    --color-inverted: var(--foreground);
    --color-default: var(--foreground);
    --color-elevated: var(--muted);
    --color-accented: var(--accent);
}

@layer base {
    * {
        @apply border-edge outline-ring/50;
    }
    body {
        @apply bg-background text-foreground antialiased overflow-x-hidden;
    }
    .content-wrapper {
        @apply md:max-w-3xl
    }
}
@utility container {
    @apply mx-auto md:max-w-4xl border-x
}

@utility no-scrollbar {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    /* Hide scrollbar for Chrome, Safari and Opera */
    &::-webkit-scrollbar {
        display: none;
    }
}

@utility link {
    @apply font-medium underline underline-offset-4;
}

@utility screen-line-before {
    @apply relative before:absolute before:top-0 before:-left-[100vw] before:-z-1 before:h-px before:w-[200vw] before:bg-edge;
}

@utility screen-line-after {
    @apply relative after:absolute after:bottom-0 after:-left-[100vw] after:z-1 after:h-px after:w-[200vw] after:bg-edge;
}

@utility wrapper-line-before {
    @apply relative before:absolute before:top-0 before:left-0 before:-z-1 before:h-px before:w-full before:bg-edge;
}

@utility wrapper-line-after {
    @apply relative after:absolute after:bottom-0 after:left-0 after:z-1 after:h-px after:w-full after:bg-edge;
}

@utility step {
    counter-increment: step;
    &::before {
        @apply mr-2 inline-flex size-7 items-center justify-center rounded-full border border-muted-foreground/15 bg-muted text-center -indent-px text-sm font-medium text-muted-foreground ring-1 ring-edge ring-offset-1 ring-offset-background md:absolute md:-mt-0.5 md:-ml-11.5 md:size-8;
        content: counter(step);
    }
}

@layer base {
    *,
    ::after,
    ::before,
    ::backdrop,
    ::file-selector-button {
        @apply border-border outline-ring/50;
    }

    ::selection {
        @apply bg-selection text-selection-foreground;
    }

    /* Custom scrollbar styling. Thanks @shadcn-ui */
    ::-webkit-scrollbar {
        width: 5px;
    }

    ::-webkit-scrollbar-track {
        background: transparent;
    }

    ::-webkit-scrollbar-thumb {
        background: var(--border);
        border-radius: 5px;
    }

    * {
        scrollbar-width: thin;
        scrollbar-color: var(--border) transparent;
        scroll-behavior: smooth;
    }

    [id] {
        @apply scroll-mt-18;
    }


    @keyframes show-top-mask {
        to {
            --top-mask-height: var(--mask-height);
        }
    }

    @keyframes hide-bottom-mask {
        to {
            --bottom-mask-height: 0px;
        }
    }

    @keyframes show-left-mask {
        to {
            --left-mask-width: var(--mask-width);
        }
    }

    @keyframes hide-right-mask {
        to {
            --right-mask-width: 0px;
        }
    }
}

@layer components {
    [data-rehype-pretty-code-figure] {
        @apply relative my-[1.25em] rounded-xl bg-code text-code-foreground;

        pre {
            @apply overflow-x-auto overscroll-x-none px-4 py-4 has-data-line-numbers:px-0;
            /* @apply supports-timeline-scroll:scroll-fade-x supports-timeline-scroll:[--mask-offset-right:-1px] supports-timeline-scroll:[--mask-width:24px] supports-timeline-scroll:has-data-line-numbers:[--mask-offset-left:calc(var(--spacing)*16-4px)]; */
        }

        code {
            @apply font-mono text-sm;
        }
    }

    [data-line] {
        @apply py-0.5;
    }

    [data-line] span {
        @apply text-(--shiki-light) dark:text-(--shiki-dark);
    }

    [data-rehype-pretty-code-title] {
        @apply flex items-center gap-3 border-b px-4 py-2.5 text-sm text-muted-foreground [&_svg]:size-4 [&_svg]:text-muted-foreground;
    }

    [data-line-numbers] {
        counter-reset: line;
    }

    [data-line-numbers] > [data-line]::before {
        counter-increment: line;
        content: counter(line);
        @apply sticky left-0 inline-block w-16 bg-code pr-6 text-right text-sm text-code-number;
    }

    [data-line-numbers] [data-highlighted-line][data-line]::before {
        @apply bg-code-highlight;
    }

    [data-highlighted-line] {
        @apply bg-code-highlight;
    }
}

@property --top-mask-height {
    syntax: "<length>";
    inherits: true;
    initial-value: 0px;
}

@property --bottom-mask-height {
    syntax: "<length>";
    inherits: true;
    initial-value: 80px;
}

@property --left-mask-width {
    syntax: "<length>";
    inherits: true;
    initial-value: 0px;
}

@property --right-mask-width {
    syntax: "<length>";
    inherits: true;
    initial-value: 80px;
}

@utility scroll-fade-y {
    --mask-height: 64px;
    --scroll-buffer: 2rem;

    /* Set up the mask layers */
    mask-image: linear-gradient(to top, transparent, var(--foreground) 90%),
    linear-gradient(to bottom, transparent 0%, var(--foreground) 100%),
    linear-gradient(var(--background), var(--background));

    mask-size: 100% var(--top-mask-height),
    100% var(--bottom-mask-height),
    100% 100%;
    mask-repeat: no-repeat, no-repeat, no-repeat;
    mask-position: 0 0,
    0 100%,
    0 0;
    /* Exclude the gradient areas from the solid mask */
    mask-composite: exclude;

    animation-name: show-top-mask, hide-bottom-mask;
    animation-fill-mode: both;
}

@utility scroll-fade-x {
    --mask-width: 64px;
    --mask-offset-left: 0px;
    --mask-offset-right: 0px;
    --scroll-buffer: 2rem;

    mask-image: linear-gradient(to left, transparent, var(--foreground) 90%),
    linear-gradient(to right, transparent 0%, var(--foreground) 100%),
    linear-gradient(var(--background), var(--background));

    mask-size: var(--left-mask-width) 100%,
    var(--right-mask-width) 100%,
    100% 100%;
    mask-repeat: no-repeat, no-repeat, no-repeat;
    mask-position: var(--mask-offset-left) 0,
    calc(100% - var(--mask-offset-right)) 0,
    0 0;
    mask-composite: exclude;

    animation-name: show-left-mask, hide-right-mask;
    animation-fill-mode: both;
}

main {
    @apply overflow-x-hidden
}

button {
    @apply cursor-pointer;
}

.fade-rotate {
    @apply animate-[fade-rotate_2s_ease-in-out_infinite];
}

.fade-slide {
    @apply absolute w-full left-4 top-1/2 -translate-y-1/2 text-left opacity-0;
    animation: fade-slide 6s linear infinite;
}

.fade-slide:nth-child(1) {
    animation-delay: 0s;
}

.fade-slide:nth-child(2) {
    animation-delay: 2s;
}

.fade-slide:nth-child(3) {
    animation-delay: 4s;
}
